<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STARS // REFORGED</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body class="crt">

    <header>
        <div style="font-size: 20px; color: var(--c-cyan); letter-spacing: 2px; text-shadow: 0 0 10px var(--c-cyan-dim);">STARS <span style="font-size:10px; opacity:0.7">REFORGED</span></div>
        <div style="display:flex;">
            <div class="res-ticker">Y: <span id="g-year" style="color:#fff">2400</span></div>
            <div class="res-ticker">CR: <span id="g-cred">500</span></div>
            <div class="res-ticker">MET: <span id="g-metal">20k</span></div>
            <div class="res-ticker">R&D: <span id="g-rd">0</span></div>
        </div>
    </header>

    <nav>
        <button class="icon-btn active" onclick="UI.setScreen('map')" title="Galaxy Map">M</button>
        <button class="icon-btn" onclick="UI.setScreen('empire')" title="Empire Overview">E</button>
        <button class="icon-btn" onclick="UI.setScreen('research')" title="Research Lab">R</button>
        <button class="icon-btn" onclick="UI.setScreen('design')" title="Ship Design">D</button>
        <button class="icon-btn" onclick="UI.setScreen('fleets')" title="Fleet Manager">F</button>
        <button class="icon-btn" onclick="UI.setScreen('comms')" title="Diplomacy/Logs">C</button>
    </nav>

    <div id="main-view">
        <canvas id="galaxy-canvas"></canvas>
        <div class="grain"></div>

        <!-- EMPIRE SCREEN -->
        <div id="screen-empire" class="screen-overlay">
            <h1 style="color:var(--c-cyan)">IMPERIAL DASHBOARD</h1>
            <div class="grid-layout">
                <div class="card">
                    <h3>Race Traits</h3>
                    <div class="stat-row"><span>Type:</span> <span class="val" id="race-type">Synthetic Nomads</span></div>
                    <div class="stat-row"><span>Grav Tol:</span> <span class="val" id="race-grav">0.3g - 4.2g</span></div>
                    <div class="stat-row"><span>Temp Tol:</span> <span class="val" id="race-temp">-80° - 140°</span></div>
                    <div class="stat-row"><span>Growth:</span> <span class="val" id="race-growth">+17%</span></div>
                    <div class="stat-row"><span>Mining:</span> <span class="val" id="race-mining">Adaptive</span></div>
                </div>
                <div class="card">
                    <h3>Economy</h3>
                    <div class="stat-row"><span>Total Pop:</span> <span class="val" id="emp-pop">0</span></div>
                    <div class="stat-row"><span>Tax Income:</span> <span class="val" id="emp-tax">0</span></div>
                    <div class="stat-row"><span>Maint. Cost:</span> <span class="val alert" id="emp-maint">0</span></div>
                    <div class="stat-row"><span>Industrial Output:</span> <span class="val" id="emp-ind">0</span></div>
                </div>
                <div class="card">
                    <h3>Known Sectors</h3>
                    <div class="stat-row"><span>Visible Stars:</span> <span class="val" id="emp-vis">0</span></div>
                    <div class="stat-row"><span>Known Stars:</span> <span class="val" id="emp-known">0</span></div>
                    <div class="stat-row"><span>Active Fleets:</span> <span class="val" id="emp-fleets">0</span></div>
                </div>
                <div class="card">
                    <h3>Diplomacy</h3>
                    <div id="emp-diplomacy" style="font-size:12px;"></div>
                </div>
            </div>
        </div>

        <!-- RESEARCH SCREEN -->
        <div id="screen-research" class="screen-overlay">
            <h1 style="color:var(--c-cyan)">R&D LABS</h1>
            <div class="card" style="margin-bottom:20px;">
                <div class="stat-row"><span>Current Focus:</span> <span class="val" id="tech-focus">Energy</span></div>
                <div class="stat-row"><span>Research Budget:</span> <span class="val"><span id="rd-budget">15</span>%</span></div>
                <input id="rd-slider" type="range" min="5" max="30" value="15" style="width:100%;">
            </div>
            <div class="grid-layout" id="tech-grid"></div>
        </div>

        <!-- FLEET SCREEN -->
        <div id="screen-fleets" class="screen-overlay">
            <h1 style="color:var(--c-cyan)">FLEET MANIFEST</h1>
            <div class="grid-layout" id="fleet-grid"></div>
        </div>

        <!-- COMMS SCREEN -->
        <div id="screen-comms" class="screen-overlay">
            <h1 style="color:var(--c-cyan)">COMMS & LOGS</h1>
            <div class="grid-layout comms-grid">
                <div class="card">
                    <h3>Inbox</h3>
                    <div id="msg-list" style="font-size:12px; height: 300px; overflow-y:auto;"></div>
                </div>
                <div class="card">
                    <h3>Message Content</h3>
                    <div id="msg-body" style="font-size:14px; color:#fff; white-space:pre-line;">Select a message...</div>
                </div>
                <div class="card">
                    <h3>Battle VCR</h3>
                    <div id="battle-list" style="font-size:12px; height: 150px; overflow-y:auto;"></div>
                    <div id="battle-body" style="font-size:12px; color:#fff; white-space:pre-line; margin-top:10px;">No engagements logged.</div>
                </div>
                <div class="card">
                    <h3>Transmit</h3>
                    <div class="stat-row"><span>To:</span> <select id="msg-recipient"></select></div>
                    <textarea id="msg-text" placeholder="Compose transmission..."></textarea>
                    <button class="action" id="msg-send">SEND</button>
                </div>
            </div>
        </div>

        <!-- DESIGN SCREEN -->
        <div id="screen-design" class="screen-overlay">
            <h1 style="color:var(--c-cyan)">NAVAL ARCHITECT</h1>
            <div class="grid-layout">
                <div class="card">
                    <h3>Hull & Components</h3>
                    <div class="stat-row">Hull: <select id="des-hull"></select></div>
                    <div class="stat-row">Engine: <select id="des-eng"></select></div>
                    <div class="stat-row">Weapon: <select id="des-wep"></select></div>
                    <div class="stat-row">Shield: <select id="des-shi"></select></div>
                    <div class="stat-row">Special: <select id="des-spec"></select></div>
                    <input type="text" id="des-name" value="New Ship Class" style="width:100%; margin-top:10px;">
                    <button class="action" onclick="Game.saveDesign()">SAVE BLUEPRINT</button>
                </div>
                <div class="card">
                    <h3>Simulated Specs</h3>
                    <div class="stat-row"><span>Cost:</span> <span class="val" id="sim-cost">0</span></div>
                    <div class="stat-row"><span>Mass:</span> <span class="val" id="sim-mass">0</span>kt</div>
                    <div class="stat-row"><span>Fuel Cap:</span> <span class="val" id="sim-fuel">0</span>mg</div>
                    <div class="stat-row"><span>Range:</span> <span class="val" id="sim-range">0</span>ly</div>
                    <div class="stat-row"><span>Speed:</span> <span class="val" id="sim-speed">0</span></div>
                    <div class="stat-row"><span>Battle Value:</span> <span class="val" id="sim-bv">0</span></div>
                </div>
                <div class="card">
                    <h3>Saved Blueprints</h3>
                    <div id="design-list" style="font-size:12px; max-height:260px; overflow:auto;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- CONTEXT SIDEBAR -->
    <aside id="ctx-panel">
        <div id="ctx-none" style="text-align:center; margin-top:50px; color:#555;">NO SIGNAL<br>L-Click Select<br>R-Click Move</div>
        <div id="ctx-content" style="display:none"></div>
    </aside>

    <footer>
        <button id="turn-btn" class="action" style="width:auto; padding:0 30px; height:32px;" onclick="Game.turn()">EXECUTE TURN</button>
        <div class="log-strip">
            <div id="footer-log">READY.</div>
            <div>|</div>
            <div>Space: End Turn</div>
            <div>Right Click: Move</div>
        </div>
    </footer>
    <script type="module" src="assets/js/main.js"></script>
</body>
</html>
